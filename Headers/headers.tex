\documentclass[11pt,a4paper]{book}
\usepackage[utf8]{inputenc}
\usepackage[french]{babel}
\usepackage[left=2cm,right=2cm,top=2cm,bottom=2cm]{geometry}
\usepackage{fancyhdr}
\usepackage{appendix}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{stmaryrd}
\usepackage{mathrsfs}
\usepackage{graphicx}
\usepackage[ruled,vlined, french, algochapter]{algorithm2e}
\usepackage{ntheorem}
\usepackage[table,dvipsnames,svgnames]{xcolor}
\usepackage[framemethod=tikz]{mdframed}
\usetikzlibrary{shadows,shadings}
\usepackage{sectsty}
\usepackage{multicol}
\usepackage{hyperref}
\usepackage{listings}
\usepackage{float}
\usepackage[explicit]{titlesec}
\usepackage{colortbl}
\usepackage{enumitem}
\usepackage{tikz} %Tikz !
\usepackage{multirow}
\usepackage{ulem}
\usepackage{hhline}
\usepackage{circuitikz}
\usetikzlibrary{automata, positioning, arrows}
\usetikzlibrary{shapes,shapes.geometric}
\usepackage{cancel}

\usepackage{xcolor}
\definecolor{mGreen}{rgb}{0,0.6,0}
\definecolor{mGray}{rgb}{0.5,0.5,0.5}
\definecolor{mPurple}{rgb}{0.58,0,0.82}
\definecolor{backgroundColour}{rgb}{0.95,0.95,0.92}

\tikzset{elliptic state/.style={draw,ellipse}}

% En-tête et pied de page
\newcommand{\mask}[1]{}

\pagestyle{fancy}
\renewcommand\headrulewidth{1pt}
\fancyhead[L]{Leçons d'Informatique}
\fancyhead[R]{Préparation à l'Agrégation d'Informatique 2022}
\fancyfoot[R]{\tiny $\copyright$ 2024 Martinez 2022 M. Marin}

\setcounter{tocdepth}{1} 



%Design des théorèmes
\usepackage{framed}
\usepackage{xparse}


% Configuration des compteurs de théorème
\newcounter{theoremcounter}[chapter] % Compteur commun, remis à zéro à chaque chapitre
\renewcommand{\thetheoremcounter}{\thechapter.\arabic{theoremcounter}} % Format : Chapitre.Numéro

\definecolor{vert-def}{RGB}{51, 160, 0}
\definecolor{orange-exo}{RGB}{255, 102, 0}

% Définir un style général pour les environnements
\newmdenv[
linecolor=black, % Couleur du trait vertical
linewidth=2pt, % Épaisseur du trait
topline=false, % Pas de ligne en haut
bottomline=false, % Pas de ligne en bas
rightline=false, % Pas de ligne à droite
skipabove=10pt, % Espacement avant
skipbelow=10pt, % Espacement après
innerleftmargin=10pt, % Marge interne à gauche
innerrightmargin=10pt, % Marge interne à droite
innertopmargin=5pt, % Marge interne en haut
innerbottommargin=5pt, % Marge interne en bas
]{tstyleNoir}

\newmdenv[
linecolor=red, % Couleur du trait vertical
linewidth=2pt, % Épaisseur du trait
%topline=false, % Pas de ligne en haut
%bottomline=false, % Pas de ligne en bas
%rightline=false, % Pas de ligne à droite
skipabove=10pt, % Espacement avant
skipbelow=10pt, % Espacement après
innerleftmargin=10pt, % Marge interne à gauche
innerrightmargin=10pt, % Marge interne à droite
innertopmargin=5pt, % Marge interne en haut
innerbottommargin=5pt, % Marge interne en bas
]{tstyleRouge}

\newmdenv[
linecolor=blue, % Couleur du trait vertical
linewidth=2pt, % Épaisseur du trait
topline=false, % Pas de ligne en haut
bottomline=false, % Pas de ligne en bas
rightline=false, % Pas de ligne à droite
skipabove=10pt, % Espacement avant
skipbelow=10pt, % Espacement après
innerleftmargin=10pt, % Marge interne à gauche
innerrightmargin=10pt, % Marge interne à droite
innertopmargin=5pt, % Marge interne en haut
innerbottommargin=5pt, % Marge interne en bas
]{tstyleBleu}

\newmdenv[
linecolor=vert-def, % Couleur du trait vertical
linewidth=2pt, % Épaisseur du trait
%topline=false, % Pas de ligne en haut
%bottomline=false, % Pas de ligne en bas
%rightline=false, % Pas de ligne à droite
skipabove=10pt, % Espacement avant
skipbelow=10pt, % Espacement après
innerleftmargin=10pt, % Marge interne à gauche
innerrightmargin=10pt, % Marge interne à droite
innertopmargin=5pt, % Marge interne en haut
innerbottommargin=5pt, % Marge interne en bas
]{tstyleDef}

\newmdenv[
linecolor=vert-def, % Couleur du trait vertical
linewidth=2pt, % Épaisseur du trait
topline=false, % Pas de ligne en haut
bottomline=false, % Pas de ligne en bas
rightline=false, % Pas de ligne à droite
skipabove=10pt, % Espacement avant
skipbelow=10pt, % Espacement après
innerleftmargin=10pt, % Marge interne à gauche
innerrightmargin=10pt, % Marge interne à droite
innertopmargin=5pt, % Marge interne en haut
innerbottommargin=5pt, % Marge interne en bas
]{tstyleVert}


\newmdenv[
linecolor=orange-exo, % Couleur du trait vertical
linewidth=2pt, % Épaisseur du trait
topline=false, % Pas de ligne en haut
bottomline=false, % Pas de ligne en bas
rightline=false, % Pas de ligne à droite
skipabove=10pt, % Espacement avant
skipbelow=10pt, % Espacement après
innerleftmargin=10pt, % Marge interne à gauche
innerrightmargin=10pt, % Marge interne à droite
innertopmargin=5pt, % Marge interne en haut
innerbottommargin=5pt, % Marge interne en bas
]{tstyleOrange}


\makeatletter
\def\newframedGtheorem#1{%
\theoremprework{
\renewcommand*\FrameCommand{%
  {\color{DimGrey}\vrule width 1pt \hspace{2.5pt}}}
  \framed}%
\theorempostwork{\endframed}%
\newtheorem@i{#1}%
}
\makeatother
%%%


% Environnements spécifiques avec un argument optionnel
\newenvironment{theorem}[1][\empty]{%
	\refstepcounter{theoremcounter} % Incrémente le compteur
	\begin{tstyleRouge}%
		\textcolor{red}{\textbf{Théorème~\thetheoremcounter}%
			\ifx#1\empty\else~(\textbf{#1})\fi :}~%
	}{%
	\end{tstyleRouge}%
}

\newenvironment{proposition}[1][\empty]{%
	\refstepcounter{theoremcounter} % Incrémente le compteur
	\begin{tstyleRouge}%
		\textcolor{red}{\textbf{Propriété~\thetheoremcounter}%
			\ifx#1\empty\else~(\textbf{#1})\fi :}~%
	}{%
	\end{tstyleRouge}%
}

\newenvironment{principe}[1][\empty]{%
	\refstepcounter{theoremcounter} % Incrémente le compteur
	\begin{tstyleRouge}%
		\textcolor{red}{\textbf{Principe~\thetheoremcounter}%
			\ifx#1\empty\else~(\textbf{#1})\fi :}~%
	}{%
	\end{tstyleRouge}%
}

\newenvironment{corollary}[1][\empty]{%
	\refstepcounter{theoremcounter} % Incrémente le compteur
	\begin{tstyleRouge}%
		\textcolor{red}{\textbf{Corollaire~\thetheoremcounter}%
			\ifx#1\empty\else~(\textbf{#1})\fi :}~%
	}{%
	\end{tstyleRouge}%
}

\newenvironment{lemma}[1][\empty]{%
	\refstepcounter{theoremcounter} % Incrémente le compteur
	\begin{tstyleRouge}%
		\textcolor{red}{\textbf{Lemme~\thetheoremcounter}%
			\ifx#1\empty\else~(\textbf{#1})\fi :}~%
	}{%
	\end{tstyleRouge}%
}

\newenvironment{example}[1][\empty]{%
	\refstepcounter{theoremcounter} % Incrémente le compteur
	\begin{tstyleBleu}%
		\textcolor{blue}{\textbf{Exemple~\thetheoremcounter}%
			\ifx#1\empty\else~(\textbf{#1})\fi :}~%
	}{%=false, % Pas de ligne en bas
	\end{tstyleBleu}%
}

\newenvironment{rem}[1][\empty]{%
	\refstepcounter{theoremcounter} % Incrémente le compteur
	\begin{tstyleBleu}%
		\textcolor{blue}{\textbf{Remarque~\thetheoremcounter}%
			\ifx#1\empty\else~(\textbf{#1})\fi :}~%
	}{%
	\end{tstyleBleu}%
}

\newenvironment{definition}[1][\empty]{%
	\refstepcounter{theoremcounter} % Incrémente le compteur
	\begin{tstyleDef}%
		\textcolor{vert-def}{\textbf{Définition~\thetheoremcounter}%
			\ifx#1\empty\else~(\textbf{#1})\fi :}~%
	}{%
	\end{tstyleDef}%
}

\newenvironment{exercise}[1][\empty]{%
	\refstepcounter{theoremcounter} % Incrémente le compteur
	\begin{tstyleOrange}%
		\textcolor{orange-exo}{\textbf{Exercice~\thetheoremcounter}%
			\ifx#1\empty\else~(\textbf{#1})\fi :}~%
	}{%
	\end{tstyleOrange}%
}

\NewDocumentEnvironment{personalise}{O{} O{}}
{%
	\refstepcounter{theoremcounter} % Incrémente le compteur
	\begin{tstyleNoir}%
		\textbf{#1~\thetheoremcounter}%
		\ifx#2\empty\else~(\textbf{#2})\fi
		:~%
	}{%
	\end{tstyleNoir}%
}

\newenvironment{idee}[1][\empty]{%
	\refstepcounter{theoremcounter} % Incrémente le compteur
	\begin{tstyleBleu}%
		\textcolor{blue}{\textbf{Idée~\thetheoremcounter}%
			\ifx#1\empty\else~(\textbf{#1})\fi :}~%
	}{%
	\end{tstyleBleu}%
}

\newenvironment{algo}[1][\empty]{%
	\refstepcounter{theoremcounter} % Incrémente le compteur
	\begin{tstyleBleu}%
		\textcolor{blue}{\textbf{Algorithme~\thetheoremcounter}%
			\ifx#1\empty\else~(\textbf{#1})\fi :}~%
	}{%
	\end{tstyleBleu}%
}


\newenvironment{syntaxe}[1][\empty]{%
	\refstepcounter{theoremcounter} % Incrémente le compteur
	\begin{tstyleVert}%
		\textcolor{vert-def}{\textbf{Syntaxe~\thetheoremcounter}%
			\ifx#1\empty\else~(\textbf{#1})\fi :}~%
	}{%
	\end{tstyleVert}%
}

\newenvironment{appl}[1][\empty]{%
	\refstepcounter{theoremcounter} % Incrémente le compteur
	\begin{tstyleBleu}%
		\textcolor{blue}{\textbf{Application~\thetheoremcounter}%
			\ifx#1\empty\else~(\textbf{#1})\fi :}~%
	}{%
	\end{tstyleBleu}%
}

\newenvironment{impl}[1][\empty]{%
	\refstepcounter{theoremcounter} % Incrémente le compteur
	\begin{tstyleBleu}%
		\textcolor{blue}{\textbf{Implémentation~\thetheoremcounter}%
			\ifx#1\empty\else~(\textbf{#1})\fi :}~%
	}{%
	\end{tstyleBleu}%
}


%Définition des différents environnements
\newframedGtheorem{com}{\color{DimGrey}Commentaire}[chapter]
\newframedGtheorem{temps}{\color{DimGrey}Temps}[chapter]


%\newtheorem{notion}{\textbf Notion}[chapter]


\newenvironment{proof}[1][\unskip]{\noindent \textit{Démonstration #1. }}{\hfill $\square$ \\}


%Gestion de la hierarchie
\setcounter{secnumdepth}{3}

\renewcommand{\familydefault}{\sfdefault}
\renewcommand{\thesection}{\arabic{section}}
\renewcommand{\thesubsection}{\Roman{subsection}}
\renewcommand{\thesubsubsection}{\Alph{subsubsection}}


\makeatletter
\renewcommand{\@chapapp}{Leçon}
\makeatother


%En-tête des leçons 
% utilisation : \debut{Auteurs}{niveau}{pré-requis}{références}
\newcommand\debut[4]{
\noindent \textbf{Auteur\textperiodcentered e\textperiodcentered s:} #1  \\
\noindent\textbf{Niveau :} #2 \\
\noindent\textbf{Pré-requis :} #3 \\
\noindent\textbf{Références :} #4 \\
}

%En-tête des développements 
% utilisation : \debut{Auteurs}{références}
\newcommand\dev[2]{
\noindent \textbf{Auteur\textperiodcentered e\textperiodcentered s:} #1  \\
\noindent\textbf{Références :} #2 \\
}

%Commande personnalisées
\newcommand{\N}{\ensuremath{\mathbb{N}}}
\newcommand{\overarrow}[1]{\smash{\overset{#1}{\longrightarrow}}}
\newcommand*\circled[1]{\tikz[baseline=(char.base)]{
		\node[shape=circle,draw,inner sep=2pt] (char) {#1};}}

%Pour le listing de code
\lstset{
frame = single, 
framexleftmargin=1pt,
literate=
{à}{{\`a}}1
{é}{{\'e}}1
{è}{{\`e}}1
{ô}{{\^o}}1}

\lstset{escapeinside={<@}{@>}}

\definecolor{lightpink}{HTML}{f7d1d5}
%Éviter le saut de page après un chapitre
\renewcommand{\cleardoublepage}{\newpage}
\newcommand\countme{\refstepcounter{\thechapter}\thechapter}

\lstdefinestyle{CStyle}{
	backgroundcolor=\color{backgroundColour},   
	commentstyle=\color{mGreen},
	keywordstyle=\color{magenta},
	numberstyle=\tiny\color{mGray},
	stringstyle=\color{mPurple},
	basicstyle=\footnotesize,
	breakatwhitespace=false,         
	breaklines=true,                 
	captionpos=b,                    
	keepspaces=true,                 
	numbers=left,                    
	numbersep=5pt,                  
	showspaces=false,                
	showstringspaces=false,
	showtabs=false,                  
	tabsize=2,
	language=C
}
%Copyright


\newlength\mylen
\newcommand\multientree[1]{%
	\settowidth\mylen{\Entree{}}%
	\setlength\hangindent{\mylen}%
	\hspace*{\mylen}#1\\}
	

\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}